$.fn.droppy=function(){this.each(function(){var d=this,zIndex=1000;$(this).prepend("<span id='links_move'></span>");$('li:has(li) > a',this).append(" >");function getSubnav(a){if(a.nodeName.toLowerCase()=='li'){var b=$('> ul',a);return b.length?b[0]:null}else{return a}}function getActuator(a){if(a.nodeName.toLowerCase()=='ul'){return $(a).parents('li')[0]}else{return a}}function hide(){var a=getSubnav(this);if(!a)return;$.data(a,'cancelHide',false);setTimeout(function(){if(!$.data(a,'cancelHide')){$(a).hide()}},500)}function show(){var a=getSubnav(this);$(a).stop(true,true);if(!a)return;$.data(a,'cancelHide',true);$(a).css({zIndex:zIndex++}).show();if(this.nodeName.toLowerCase()=='ul'){var b=getActuator(this)}}$('ul, li',this).hover(show,hide);$('li:not(li li)',this).hover(function(){var a=this;var b=$(this).offset();var c=$(d).offset();$('#links_move').animate({left:(b.left-c.left),height:$(a).height(),width:$(a).width()},{duration:250,queue:false})},function(){var a=this;$('#links_move').stop(true).animate({height:0,width:0},{duration:250})})})};